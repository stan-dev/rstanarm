<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- upstream: inst/BS5/templates/head.html; pkgdown-version: 2.1.3, fe04924 --><!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bayesian ordinal regression models via Stan — stan_polr • rstanarm</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4.0.0/tex-mml-chtml.js" integrity="sha256-qoRlVrS5NAnXSSSiMfFXwK8C9obG11Iybe4h2+bQYR4=" crossorigin="anonymous">
  </script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- Font Awesome 7.0.1 for Bluesky icon --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" referrerpolicy="no-referrer"><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bayesian ordinal regression models via Stan — stan_polr"><meta name="description" content="
Bayesian inference for ordinal (or binary) regression models under a
proportional odds assumption."><meta property="og:description" content="
Bayesian inference for ordinal (or binary) regression models under a
proportional odds assumption."><meta property="og:image" content="https://mc-stan.org/rstanarm/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <!-- upstream: inst/BS5/templates/navbar.html; pkgdown-version: 2.1.3, fe04924 -->
<!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 -->
<nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">


    <a class="navbar-brand me-2" href="../index.html">
      <!-- Add Stan logo -->
      <picture><source type="image/svg+xml" srcset="../logo.svg"><img src="../logo.png" class="stan-logo" alt="Stan blue hex logo"></source></picture>
      rstanarm
    </a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to homepage"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other Packages</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-other-packages"><li><a class="external-link dropdown-item" href="https://mc-stan.org/bayesplot">bayesplot</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/cmdstanr">cmdstanr</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/loo">loo</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/posterior">posterior</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/projpred">projpred</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstan">rstan</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstantools">rstantools</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/shinystan">shinystan</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mc-stan.org/about/">About Stan</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/did:plc:qznndgdnkem2yryu7ipqbpv7" aria-label="Visit our Bluesky profile"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discourse.mc-stan.org/" aria-label="Visit our forums"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stan-dev/rstanarm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Bayesian ordinal regression models via Stan</h1>
      <small class="dont-index">Source: <a href="https://github.com/stan-dev/rstanarm/blob/New-pkgdown-theme/R/stan_polr.R" class="external-link"><code>R/stan_polr.R</code></a>, <a href="https://github.com/stan-dev/rstanarm/blob/New-pkgdown-theme/R/stan_polr.fit.R" class="external-link"><code>R/stan_polr.fit.R</code></a></small>
      <div class="d-none name"><code>stan_polr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>
Bayesian inference for ordinal (or binary) regression models under a
proportional odds assumption.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stan_polr</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">weights</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  <span class="va">subset</span>,</span>
<span>  na.action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"na.action"</span>, <span class="st">"na.omit"</span><span class="op">)</span>,</span>
<span>  contrasts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logistic"</span>, <span class="st">"probit"</span>, <span class="st">"loglog"</span>, <span class="st">"cloglog"</span>, <span class="st">"cauchit"</span><span class="op">)</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="priors.html">R2</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'location' must be specified"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_counts <span class="op">=</span> <span class="fu"><a href="priors.html">dirichlet</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  shape <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_PD <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sampling"</span>, <span class="st">"meanfield"</span>, <span class="st">"fullrank"</span><span class="op">)</span>,</span>
<span>  adapt_delta <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  do_residuals <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">stan_polr.fit</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  wt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  offset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logistic"</span>, <span class="st">"probit"</span>, <span class="st">"loglog"</span>, <span class="st">"cloglog"</span>, <span class="st">"cauchit"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="priors.html">R2</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"'location' must be specified"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_counts <span class="op">=</span> <span class="fu"><a href="priors.html">dirichlet</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  shape <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_PD <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sampling"</span>, <span class="st">"meanfield"</span>, <span class="st">"fullrank"</span><span class="op">)</span>,</span>
<span>  adapt_delta <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  do_residuals <span class="op">=</span> <span class="va">algorithm</span> <span class="op">==</span> <span class="st">"sampling"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula-data-subset">formula, data, subset<a class="anchor" aria-label="anchor" href="#arg-formula-data-subset"></a></dt>
<dd><p>Same as <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code>,
but <em>we strongly advise against omitting the <code>data</code>
argument</em>. Unless <code>data</code> is specified (and is a data frame) many
post-estimation functions (including <code>update</code>, <code>loo</code>,
<code>kfold</code>) are not guaranteed to work properly.</p></dd>


<dt id="arg-weights-na-action-contrasts-model">weights, na.action, contrasts, model<a class="anchor" aria-label="anchor" href="#arg-weights-na-action-contrasts-model"></a></dt>
<dd><p>Same as <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code>, but
rarely specified.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to the function in the <span class="pkg">rstan</span>
package (<code>sampling</code>,
<code>vb</code>, or
<code>optimizing</code>),
corresponding to the estimation method named by <code>algorithm</code>. For example,
if <code>algorithm</code> is <code>"sampling"</code> it is possible to specify <code>iter</code>,
<code>chains</code>, <code>cores</code>, and other MCMC controls.</p>
<p>Another useful argument that can be passed to <span class="pkg">rstan</span> via <code>...</code> is
<code>refresh</code>, which specifies how often to print updates when sampling
(i.e., show the progress every <code>refresh</code> iterations). <code>refresh=0</code>
turns off the iteration updates.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>One of 'logistic', 'probit', 'loglog', 'cloglog' or 'cauchit',
but can be abbreviated. See <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code> for more details.</p></dd>


<dt id="arg-prior">prior<a class="anchor" aria-label="anchor" href="#arg-prior"></a></dt>
<dd><p>Prior for coefficients. Should be a call to <code><a href="priors.html">R2</a></code>
to specify the prior location of the \(R^2\) but can be <code>NULL</code>
to indicate a standard uniform prior. See <code><a href="priors.html">priors</a></code>.</p></dd>


<dt id="arg-prior-counts">prior_counts<a class="anchor" aria-label="anchor" href="#arg-prior-counts"></a></dt>
<dd><p>A call to <code><a href="priors.html">dirichlet</a></code> to specify the
prior counts of the outcome when the predictors are at their sample
means.</p></dd>


<dt id="arg-shape">shape<a class="anchor" aria-label="anchor" href="#arg-shape"></a></dt>
<dd><p>Either <code>NULL</code> or a positive scalar that is interpreted
as the shape parameter for a <code><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">GammaDist</a></code>ribution on
the exponent applied to the probability of success when there are only
two outcome categories. If <code>NULL</code>, which is the default, then the
exponent is taken to be fixed at \(1\).</p></dd>


<dt id="arg-rate">rate<a class="anchor" aria-label="anchor" href="#arg-rate"></a></dt>
<dd><p>Either <code>NULL</code> or a positive scalar that is interpreted
as the rate parameter for a <code><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">GammaDist</a></code>ribution on
the exponent applied to the probability of success when there are only
two outcome categories. If <code>NULL</code>, which is the default, then the
exponent is taken to be fixed at \(1\).</p></dd>


<dt id="arg-prior-pd">prior_PD<a class="anchor" aria-label="anchor" href="#arg-prior-pd"></a></dt>
<dd><p>A logical scalar (defaulting to <code>FALSE</code>) indicating
whether to draw from the prior predictive distribution instead of
conditioning on the outcome.</p></dd>


<dt id="arg-algorithm">algorithm<a class="anchor" aria-label="anchor" href="#arg-algorithm"></a></dt>
<dd><p>A string (possibly abbreviated) indicating the
estimation approach to use. Can be <code>"sampling"</code> for MCMC (the
default), <code>"optimizing"</code> for optimization, <code>"meanfield"</code> for
variational inference with independent normal distributions, or
<code>"fullrank"</code> for variational inference with a multivariate normal
distribution. See <code><a href="rstanarm-package.html">rstanarm-package</a></code> for more details on the
estimation algorithms. NOTE: not all fitting functions support all four
algorithms.</p></dd>


<dt id="arg-adapt-delta">adapt_delta<a class="anchor" aria-label="anchor" href="#arg-adapt-delta"></a></dt>
<dd><p>Only relevant if <code>algorithm="sampling"</code>. See
the <a href="adapt_delta.html">adapt_delta</a> help page for details.</p></dd>


<dt id="arg-do-residuals">do_residuals<a class="anchor" aria-label="anchor" href="#arg-do-residuals"></a></dt>
<dd><p>A logical scalar indicating whether or not to
automatically calculate fit residuals after sampling completes. Defaults to
<code>TRUE</code> if and only if <code>algorithm="sampling"</code>. Setting
<code>do_residuals=FALSE</code> is only useful in the somewhat rare case that
<code>stan_polr</code> appears to finish sampling but hangs instead of returning
the fitted model object.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A design matrix.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>A response variable, which must be a (preferably ordered) factor.</p></dd>


<dt id="arg-wt">wt<a class="anchor" aria-label="anchor" href="#arg-wt"></a></dt>
<dd><p>A numeric vector (possibly <code>NULL</code>) of observation weights.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>A numeric vector (possibly <code>NULL</code>) of offsets.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="stanreg-objects.html">stanreg</a> object is returned
for <code>stan_polr</code>.</p>
<p>A <a href="https://mc-stan.org/rstan/reference/stanfit-class.html" class="external-link">stanfit</a> object (or a slightly modified
  stanfit object) is returned if <code>stan_polr.fit</code> is called directly.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>stan_polr</code> function is similar in syntax to
  <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code> but rather than performing maximum likelihood
  estimation of a proportional odds model, Bayesian estimation is performed
  (if <code>algorithm = "sampling"</code>) via MCMC. The <code>stan_polr</code>
  function calls the workhorse <code>stan_polr.fit</code> function, but it is
  possible to call the latter directly.</p>
<p>As for <code><a href="stan_lm.html">stan_lm</a></code>, it is necessary to specify the prior
  location of \(R^2\). In this case, the \(R^2\) pertains to the
  proportion of variance in the latent variable (which is discretized
  by the cutpoints) attributable to the predictors in the model.</p>
<p>Prior beliefs about the cutpoints are governed by prior beliefs about the
  outcome when the predictors are at their sample means. Both of these
  are explained in the help page on <code><a href="priors.html">priors</a></code> and in the
  <span class="pkg">rstanarm</span> vignettes.</p>
<p>Unlike <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code>, <code>stan_polr</code> also allows the "ordinal"
  outcome to contain only two levels, in which case the likelihood is the
  same by default as for <code><a href="stan_glm.html">stan_glm</a></code> with <code>family = binomial</code>
  but the prior on the coefficients is different. However, <code>stan_polr</code>
  allows the user to specify the <code>shape</code> and <code>rate</code> hyperparameters,
  in which case the probability of success is defined as the logistic CDF of
  the linear predictor, raised to the power of <code>alpha</code> where <code>alpha</code>
  has a gamma prior with the specified <code>shape</code> and <code>rate</code>. This
  likelihood is called “scobit” by Nagler (1994) because if <code>alpha</code>
  is not equal to \(1\), then the relationship between the linear predictor
  and the probability of success is skewed. If <code>shape</code> or <code>rate</code> is
  <code>NULL</code>, then <code>alpha</code> is assumed to be fixed to \(1\).</p>
<p>Otherwise, it is usually advisible to set <code>shape</code> and <code>rate</code> to
  the same number so that the expected value of <code>alpha</code> is \(1\) while
  leaving open the possibility that <code>alpha</code> may depart from \(1\) a
  little bit. It is often necessary to have a lot of data in order to estimate
  <code>alpha</code> with much precision and always necessary to inspect the
  Pareto shape parameters calculated by <code><a href="loo.stanreg.html">loo</a></code> to see if the
  results are particularly sensitive to individual observations.</p>
<p>Users should think carefully about how the outcome is coded when using
  a scobit-type model. When <code>alpha</code> is not \(1\), the asymmetry
  implies that the probability of success is most sensitive to the predictors
  when the probability of success is less than \(0.63\). Reversing the
  coding of the successes and failures allows the predictors to have the
  greatest impact when the probability of failure is less than \(0.63\).
  Also, the gamma prior on <code>alpha</code> is positively skewed, but you
  can reverse the coding of the successes and failures to circumvent this
  property.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Nagler, J., (1994). Scobit: An Alternative Estimator to Logit and Probit.
<em>American Journal of Political Science</em>. 230 – 255.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="stanreg-methods.html">stanreg-methods</a></code> and
<code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">polr</a></code>.</p>
<p>The vignette for <code>stan_polr</code>.
  <a href="https://mc-stan.org/rstanarm/articles/">https://mc-stan.org/rstanarm/articles/</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">.Platform</span><span class="op">$</span><span class="va">OS.type</span> <span class="op">!=</span> <span class="st">"windows"</span> <span class="op">||</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">r_arch</span> <span class="op">!=</span><span class="st">"i386"</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span> <span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">stan_polr</span><span class="op">(</span><span class="va">tobgp</span> <span class="op">~</span> <span class="va">agegp</span>, data <span class="op">=</span> <span class="va">esoph</span>, method <span class="op">=</span> <span class="st">"probit"</span>,</span></span>
<span class="r-in"><span>          prior <span class="op">=</span> <span class="fu"><a href="priors.html">R2</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"mean"</span><span class="op">)</span>, init_r <span class="op">=</span> <span class="fl">0.1</span>, seed <span class="op">=</span> <span class="fl">12345</span>,</span></span>
<span class="r-in"><span>          algorithm <span class="op">=</span> <span class="st">"fullrank"</span><span class="op">)</span> <span class="co"># for speed only</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: ------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: EXPERIMENTAL ALGORITHM:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:   This procedure has not been thoroughly tested and may be unstable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:   or buggy. The interface is subject to change.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: ------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Gradient evaluation took 4.5e-05 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.45 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Begin eta adaptation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:   1 / 250 [  0%]  (Adaptation)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:  50 / 250 [ 20%]  (Adaptation)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 100 / 250 [ 40%]  (Adaptation)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 150 / 250 [ 60%]  (Adaptation)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 200 / 250 [ 80%]  (Adaptation)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Success! Found best value [eta = 1] earlier than expected.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Begin stochastic gradient ascent.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:   iter             ELBO   delta_ELBO_mean   delta_ELBO_med   notes </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    100         -135.991             1.000            1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    200         -131.110             0.519            1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    300         -128.295             0.353            0.037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    400         -127.636             0.266            0.037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    500         -127.828             0.213            0.022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    600         -127.903             0.178            0.022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:    700         -127.740             0.153            0.005   MEDIAN ELBO CONVERGED</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Drawing a sample of size 1000 from the approximate posterior... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: COMPLETED.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> stan_polr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  family:       ordered [probit]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  formula:      tobgp ~ agegp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  observations: 88</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Median MAD_SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agegp.L -0.1    0.3  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agegp.Q -0.2    0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agegp.C  0.0    0.3  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agegp^4  0.0    0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> agegp^5  0.0    0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cutpoints:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Median MAD_SD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0-9g/day|10-19 -0.6    0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-19|20-29     0.1    0.1  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20-29|30+       0.8    0.2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * For help interpreting the printed output see ?print.stanreg</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * For info on the priors used see ?prior_summary.stanreg</span>
<span class="r-plt img"><img src="stan_polr-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

