<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- upstream: inst/BS5/templates/head.html; pkgdown-version: 2.1.3, fe04924 --><!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 --><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>K-fold cross-validation — kfold.stanreg • rstanarm</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_3-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- Font Awesome 7.0.1 for Bluesky icon --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" referrerpolicy="no-referrer"><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="K-fold cross-validation — kfold.stanreg"><meta name="description" content="The kfold method performs exact \(K\)-fold cross-validation. First
the data are randomly partitioned into \(K\) subsets of equal size (or as close
to equal as possible), or the user can specify the folds argument
to determine the partitioning. Then the model is refit \(K\) times, each time
leaving out one of the \(K\) subsets. If \(K\) is equal to the total
number of observations in the data then \(K\)-fold cross-validation is
equivalent to exact leave-one-out cross-validation (to which
loo is an efficient approximation)."><meta property="og:description" content="The kfold method performs exact \(K\)-fold cross-validation. First
the data are randomly partitioned into \(K\) subsets of equal size (or as close
to equal as possible), or the user can specify the folds argument
to determine the partitioning. Then the model is refit \(K\) times, each time
leaving out one of the \(K\) subsets. If \(K\) is equal to the total
number of observations in the data then \(K\)-fold cross-validation is
equivalent to exact leave-one-out cross-validation (to which
loo is an efficient approximation)."><meta property="og:image" content="https://mc-stan.org/rstanarm/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <!-- upstream: inst/BS5/templates/navbar.html; pkgdown-version: 2.1.3, fe04924 -->
<!-- https://github.com/r-lib/pkgdown/tree/fe04924b3df129bea60ac871614b01d87bcae147 -->
<nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">


    <a class="navbar-brand me-2" href="../index.html">
      <!-- Add Stan logo -->
      <picture><source type="image/svg+xml" srcset="../logo.svg"><img src="../logo.png" class="stan-logo" alt="Stan blue hex logo"></source></picture>
      rstanarm
    </a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.32.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to homepage"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other Packages</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-other-packages"><li><a class="external-link dropdown-item" href="https://mc-stan.org/bayesplot">bayesplot</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/cmdstanr">cmdstanr</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/loo">loo</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/posterior">posterior</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/projpred">projpred</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstan">rstan</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/rstantools">rstantools</a></li>
    <li><a class="external-link dropdown-item" href="https://mc-stan.org/shinystan">shinystan</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mc-stan.org/about/">About Stan</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/did:plc:qznndgdnkem2yryu7ipqbpv7" aria-label="Visit our Bluesky profile"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://discourse.mc-stan.org/" aria-label="Visit our forums"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stan-dev/rstanarm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>K-fold cross-validation</h1>
      <small class="dont-index">Source: <a href="https://github.com/stan-dev/rstanarm/blob/New-pkgdown-theme/R/loo-kfold.R" class="external-link"><code>R/loo-kfold.R</code></a></small>
      <div class="d-none name"><code>kfold.stanreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>kfold</code> method performs exact \(K\)-fold cross-validation. First
the data are randomly partitioned into \(K\) subsets of equal size (or as close
to equal as possible), or the user can specify the <code>folds</code> argument
to determine the partitioning. Then the model is refit \(K\) times, each time
leaving out one of the \(K\) subsets. If \(K\) is equal to the total
number of observations in the data then \(K\)-fold cross-validation is
equivalent to exact leave-one-out cross-validation (to which
<code><a href="loo.stanreg.html">loo</a></code> is an efficient approximation).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'stanreg'</span></span>
<span><span class="fu">kfold</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  K <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  folds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_fits <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"mc.cores"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A fitted model object returned by one of the rstanarm modeling
functions. See <a href="stanreg-objects.html">stanreg-objects</a>.</p></dd>


<dt id="arg-k">K<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>For <code>kfold</code>, the number of subsets (folds) into which the data
will be partitioned for performing \(K\)-fold cross-validation. The model
is refit <code>K</code> times, each time leaving out one of the <code>K</code> folds.
If the <code>folds</code> argument is specified then <code>K</code> will automatically
be set to <code>length(unique(folds))</code>, otherwise the specified value of
<code>K</code> is passed to <code>loo::<a href="https://mc-stan.org/loo/reference/kfold-helpers.html" class="external-link">kfold_split_random</a></code> to
randomly partition the data into <code>K</code> subsets of equal (or as close to
equal as possible) size.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Currently ignored.</p></dd>


<dt id="arg-folds">folds<a class="anchor" aria-label="anchor" href="#arg-folds"></a></dt>
<dd><p>For <code>kfold</code>, an optional integer vector with one element
per observation in the data used to fit the model. Each element of the
vector is an integer in <code>1:K</code> indicating to which of the <code>K</code>
folds the corresponding observation belongs. There are some convenience
functions available in the <span class="pkg">loo</span> package that create integer vectors to
use for this purpose (see the <strong>Examples</strong> section below and also the
<a href="https://mc-stan.org/loo/reference/kfold-helpers.html" class="external-link">kfold-helpers</a> page).</p></dd>


<dt id="arg-save-fits">save_fits<a class="anchor" aria-label="anchor" href="#arg-save-fits"></a></dt>
<dd><p>For <code>kfold</code>, if <code>TRUE</code>, a component <code>'fits'</code>
is added to the returned object to store the cross-validated
<a href="stanreg-objects.html">stanreg</a> objects and the indices of the omitted
observations for each fold. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>The number of cores to use for parallelization. Instead fitting
separate Markov chains for the same model on different cores, by default
<code>kfold</code> will distribute the <code>K</code> models to be fit across the cores
(using <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parLapply</a></code> on Windows and
<code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">mclapply</a></code> otherwise). The Markov chains for each
model will be run sequentially. This will often be the most efficient
option, especially if many cores are available, but in some cases it may be
preferable to fit the <code>K</code> models sequentially and instead use the
cores for the Markov chains. This can be accomplished by setting
<code>options(mc.cores)</code> to be the desired number of cores to use
for the Markov chains <em>and</em> also manually specifying <code>cores=1</code>
when calling the <code>kfold</code> function. See the end of the
<strong>Examples</strong> section for a demonstration.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object with classes 'kfold' and 'loo' that has a similar structure
  as the objects returned by the <code><a href="loo.stanreg.html">loo</a></code> and <code><a href="loo.stanreg.html">waic</a></code>
  methods and is compatible with the <code><a href="loo.stanreg.html">loo_compare</a></code> function for
  comparing models.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Vehtari, A., Gelman, A., and Gabry, J. (2017). Practical
  Bayesian model evaluation using leave-one-out cross-validation and WAIC.
  <em>Statistics and Computing</em>. 27(5), 1413–1432.
  doi:10.1007/s11222-016-9696-4. arXiv preprint:
  <a href="https://arxiv.org/abs/1507.04544" class="external-link">https://arxiv.org/abs/1507.04544</a></p>
<p>Yao, Y., Vehtari, A., Simpson, D., and Gelman, A. (2018) Using
  stacking to average Bayesian predictive distributions. <em>Bayesian
  Analysis</em>, advance publication,  <a href="https://doi.org/10.1214/17-BA1091" class="external-link">doi:10.1214/17-BA1091</a>
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">.Platform</span><span class="op">$</span><span class="va">OS.type</span> <span class="op">!=</span> <span class="st">"windows"</span> <span class="op">||</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">r_arch</span> <span class="op">!=</span> <span class="st">"i386"</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="stan_glm.html">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span>, refresh <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="stan_glm.html">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, refresh <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit3</span> <span class="op">&lt;-</span> <span class="fu"><a href="stan_glm.html">stan_glm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span>, refresh <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 10-fold cross-validation</span></span></span>
<span class="r-in"><span><span class="co"># (if possible also specify the 'cores' argument to use multiple cores)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">kfold1</span> <span class="op">&lt;-</span> <span class="fu">kfold</span><span class="op">(</span><span class="va">fit1</span>, K <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">kfold2</span> <span class="op">&lt;-</span> <span class="fu">kfold</span><span class="op">(</span><span class="va">fit2</span>, K <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">kfold3</span> <span class="op">&lt;-</span> <span class="fu">kfold</span><span class="op">(</span><span class="va">fit3</span>, K <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="loo.stanreg.html">loo_compare</a></span><span class="op">(</span><span class="va">kfold1</span>, <span class="va">kfold2</span>, <span class="va">kfold3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># stratifying by a grouping variable</span></span></span>
<span class="r-in"><span><span class="co"># (note: might get some divergences warnings with this model but </span></span></span>
<span class="r-in"><span><span class="co"># this is just intended as a quick example of how to code this)</span></span></span>
<span class="r-in"><span><span class="va">fit4</span> <span class="op">&lt;-</span> <span class="fu"><a href="stan_glmer.html">stan_lmer</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">cyl</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">mtcars</span>, refresh <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">folds_cyl</span> <span class="op">&lt;-</span> <span class="fu">loo</span><span class="fu">::</span><span class="fu"><a href="https://mc-stan.org/loo/reference/kfold-helpers.html" class="external-link">kfold_split_stratified</a></span><span class="op">(</span>K <span class="op">=</span> <span class="fl">3</span>, x <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>, fold <span class="op">=</span> <span class="va">folds_cyl</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">kfold4</span> <span class="op">&lt;-</span> <span class="fu">kfold</span><span class="op">(</span><span class="va">fit4</span>, folds <span class="op">=</span> <span class="va">folds_cyl</span>, cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">kfold4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 1 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 2 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 3 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 4 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 5 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 6 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 7 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 8 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 9 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 10 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 1 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 2 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 3 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 4 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 5 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 6 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 7 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 8 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 9 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 10 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 1 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 2 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 3 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 4 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 5 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 6 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 7 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 8 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 9 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 10 out of 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting K = 3 models distributed over 2 cores</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Based on 3-fold cross-validation.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Estimate  SE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> elpd_kfold    -86.5 4.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p_kfold         7.3 1.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> kfoldic       172.9 8.5</span>
<span class="r-in"><span><span class="co"># Example code demonstrating the different ways to specify the number </span></span></span>
<span class="r-in"><span><span class="co"># of cores and how the cores are used</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># options(mc.cores = NULL)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # spread the K models over N_CORES cores (method 1)</span></span></span>
<span class="r-in"><span><span class="co"># kfold(fit, K, cores = N_CORES)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # spread the K models over N_CORES cores (method 2)</span></span></span>
<span class="r-in"><span><span class="co"># options(mc.cores = N_CORES)</span></span></span>
<span class="r-in"><span><span class="co"># kfold(fit, K)</span></span></span>
<span class="r-in"><span><span class="co">#  </span></span></span>
<span class="r-in"><span><span class="co"># # fit K models sequentially using N_CORES cores for the Markov chains each time</span></span></span>
<span class="r-in"><span><span class="co"># options(mc.cores = N_CORES)</span></span></span>
<span class="r-in"><span><span class="co"># kfold(fit, K, cores = 1)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

